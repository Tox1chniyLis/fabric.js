import{defineProperty as t}from"../../_virtual/_rollupPluginBabelHelpers.min.mjs";import{Intersection as i}from"../Intersection.min.mjs";import{Point as e}from"../Point.min.mjs";import{SCALE as s}from"../constants.min.mjs";import{multiplyTransformMatrixArray as r,createTranslateMatrix as o,createRotateMatrix as n,createScaleMatrix as l}from"../util/misc/matrix.min.mjs";import{renderSquareControl as a,renderCircleControl as c,renderRoundedPointControl as h,renderPointControl as m}from"./controlRendering.min.mjs";class u{constructor(i){t(this,"visible",!0),t(this,"actionName",s),t(this,"angle",0),t(this,"x",0),t(this,"y",0),t(this,"offsetX",0),t(this,"offsetY",0),t(this,"sizeX",0),t(this,"sizeY",0),t(this,"touchSizeX",0),t(this,"touchSizeY",0),t(this,"cursorStyle","crosshair"),t(this,"withConnection",!1),Object.assign(this,i)}shouldActivate(t,e,s,r){var o;let{tl:n,tr:l,br:a,bl:c}=r;return(null===(o=e.canvas)||void 0===o?void 0:o.getActiveObject())===e&&e.isControlVisible(t)&&i.isPointInPolygon(s,[n,l,a,c])}getActionHandler(t,i,e){return this.actionHandler}getMouseDownHandler(t,i,e){return this.mouseDownHandler}getMouseUpHandler(t,i,e){return this.mouseUpHandler}cursorStyleHandler(t,i,e){return i.cursorStyle}getActionName(t,i,e){return i.actionName}getVisibility(t,i){var e,s;return null!==(e=null===(s=t._controlsVisibility)||void 0===s?void 0:s[i])&&void 0!==e?e:this.visible}setVisibility(t,i,e){this.visible=t}positionHandler(t,i,s,r){return new e(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(i)}calcCornerCoords(t,i,s,a,c,h){const m=r([o(s,a),n({angle:t}),l((c?this.touchSizeX:this.sizeX)||i,(c?this.touchSizeY:this.sizeY)||i)]);return{tl:new e(-.5,-.5).transform(m),tr:new e(.5,-.5).transform(m),br:new e(.5,.5).transform(m),bl:new e(-.5,.5).transform(m)}}render(t,i,e,s,r){switch((s=s||{}).cornerStyle||r.cornerStyle){case"multiPoint":case"point":m.call(this,t,i,e,s,r);break;case"roundedPoint":h.call(this,t,i,e,s,r);break;case"circle":c.call(this,t,i,e,s,r);break;default:a.call(this,t,i,e,s,r)}}}export{u as Control};
//# sourceMappingURL=Control.min.mjs.map
